{% extends 'home/base.html' %}

{% load static %}

{% block content %}

{% load home_extras %}
    <div id="wrapper2">
        <article id="contract" class="active" style="display: block;width:auto">
        
            <div class="table-wrapper">

                {% if clauses %}

                    {% if conflicts %}

                        <h4 id='test_text'>Conflicts</h4>

                        <select id="selector">
                            <option value="none">-</option>

                            {% for conflict in conflicts %}

                                <option class="conflict" value="{{ conflict|get_index:0 }}_{{ conflict|get_index:1 }}_{{ conflict|get_index:2 }}">{{ conflict|get_index:1 }} - {{ conflict|get_index:2 }} Confidence: {{ conflict|get_index:3 }}%</option>

                            {% endfor %}
                            
                        </select>

                        <p></p>
                        <p></p>

                    {% else %}
                        <h4>No conflicts found!</h4>
                    {% endif %}

                    <div class = "row">
                    <div id='first_table' style=" overflow: auto; height: 400px;  width: 50%; float: left;">
                            <table id="table1" ><!--style="height: 400px;"> -->
                                <tbody>
                                    {% for cls in cls_obj %}
                                        <tr id='first_{{ cls.clause_id }}'>
                                            <td>
                                                {{ cls.clause_id }}
                                            </td>                                    
                                            <td>
                                                {{ clauses|get_text:cls.clause_id }}
                                            </td>                                        
                                        </tr>                                  
                                    {% endfor %}
                                </tbody>
                             </table>
                        </div>                                   
                    <div id='second_table' style="overflow: auto; height: 400px; width: 50%; float: right; ">
                           <table id="table2">
                                <tbody>
                                    {% for cls in cls_obj %}
                                        <tr id="second_{{ cls.clause_id }}">

                                            <td>
                                                {{ cls.clause_id }}
                                            </td>
                                            
                                            <td>
                                                {{ clauses|get_text:cls.clause_id }}
                                            </td>                                        
                                        </tr>                                
                                    {% endfor %}                      
                                </tbody>
                            </table>
                    </div>
               </div>

                {% else %}

                    <h4>Contract: {{ contract.con_name }}</h4>
                    <h4>Choose the classifier to process this contract.</h4>
                    <p>Check our <a href="{% url 'home:model_description' %}">model description</a>.</p>
                    <form id="file_form" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <select name="select_model">
                            <option value="cnn">
                                CNN model
                            </option>
                            <option value="msc">
                                Rule-based model
                            </option>
                        </select>
                        <br/>
                        <input type="submit" value="Open" id='select'>
                    </form>

                {% endif %}

            </div>
            <p></p>
            <p></p>                

            <div id="correct" name="{{ selected_model }}">
                
            </div>
        </article>
    </div>    
{% endblock %}
